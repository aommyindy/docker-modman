sudo: required
services:
  - docker
before_install:
  - docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"
install:
  - docker build -t $DOCKER_IMAGE .
after_success:
  - if [[ "$TRAVIS_TAG" =~ $TAG_PATTERN ]]; then docker push $DOCKER_IMAGE; fi
env:
  global:
  - TAG_PATTERN="^[0-9]+(\.[0-9]+){2}(-(alpha|beta|rc))?$"
  - DOCKER_IMAGE=ffuenf/modman:${TRAVIS_TAG:=$TRAVIS_BUILD_NUMBER}
  - secure: IvKdzJW2Bu9ws68fL1wKG6DujiahAWoC3dMHYsqVL0GZd6u9z8uC2vYZ9LN10KoEFaqDO7GJUXxOTc83wGUHRBj/jkE8jbnFCr/D3AnZIY9UAeIXy3W0pGGRFc1epmhi9qdroEEXQUsh9sWCjTx0Eh243TnyMha19pw9YAO4MdwZAdqsERf70X+0OVdOLjqH23xYbX5hUk7q8weOwGhHh5Ahdc7wh7S5LZc2PhUQPNQwvnA49ImbtP+V7YVivkpGpKBHfiBn9jWYqAYh8/zlg5nf3WFi2bejT9imCb/m/Pf+A2igB3/vLc4JGZNSKVtyCKJqZ3rSDKUTRU7MPEbxIb25pwet3QviRcxVUJMvCtcqo+YE0+f/nXhRlOG3PAPq96Tif7waBCuTAyJ82PDD6qYuMrtzpwGDs/C/MzSIRW0WUwyMfDTcXq0miO+0ywmn7Ws28beIEOvMgwUabDrZ/tCndnfluYvG28l3jNGJGKr/Y0jo5189u3ZtYW+bzNQ5v7ycIdyROTBOBGb9oYS3GP95CV1P3y7dj0ya92t10CxnigpJp3DtX9FgSWHk4y5xsw33YAaADmstGm1E/mPBFBsIQLattCpdD2avejJbC/X53owMMHTL9GrDsz260fbYCSU05fNxvYpaho6IhiUbcDp8FImeUmIZiyUO7fax5QI=
  - secure: hJ0jhI1DKja5dFL5yBUAAJpXlJiUabbKc45ph6PR0o1cmZCukzWB0reY2fD6Ynteihp68Y9Cu1XoXNFt9ZDHBAKpjVenUbE7ba2bL3y+XHdRayLurmY0qNZwomBt9plf5MYm/gRdj1zMpdlRS/EKISXfO71yvfHng+sqzLm+ZtgWs/3mWGKvm2Hlq5P5hARV9WcxO96t7S6aAVPqTIF0BitSsicSZvbkt3ByzWuUW1ESISp+u3HmhMuhTMSjmlzkauXz6BWHSe03QfHr9mDXsgrw2ttBjpcVldCc28G2USRn3jHBr8wM+U930R0pHq3wWWqsjpM5/ODpqst3Mspc4LFfhmEFAQEOjgru/gr/T1kPkyK8xawpV3ZWtmONZwuDkuBedu/kK/byce54huE4Yufsf50A9T2l6loKrlQox53+J+ZQ5t43Qsorp4xSpDUA/3HFNQ1hKAwPqXeM7rxlOZZkkEqm6A8ofmPRJK2hK3g6yoXEUd67RQTO7SCQbfYn+ChaeCuDTcY7lo+ay449q7uMbhcfKxcWQwgF9YbuLgV83LuCG9NvoMEnAsdByPu2BQwGYrOJOsXSOctJhDDr2oz8fy+bXKNWkHKoTTivnwWoS9m6mOQWxe1+xz0B26Vr5hv2a8EGmtbvsGin0+KnYuuZeIQTjjaYrswNT3wUOD8=
  - secure: NU9yVDIRN4kuvQMIVPH3v0+vSdEqvxKHcJqlGH2urNI0610zqmL8xJ5v+9nMCAtj4aHsMWxgG9UdE7nqAdfLtK9kqDsnL7XQkqvIAFkS3c4gwE91Q+ECvilDI+NAo8unKwYyB+c/nWiYFNI1+8CTRn1Y/u3mYssdWSB+ys7G1unlAR9BkxedfzMMclB2C2z2Nux+81uRRas5ylTHOvQqgmuCdBtOvk9DnBNQSSvSXaG4ty6TRnWxi0yzwNPOc6s7JuXGQWYH5pku68sqaNYiT3DGtqc5fpmdFWUN/xHJgOkVItKU9bLq/8ZUDllPSEdw/HSiLt0jJQ28p4FZXnJks1mKTX2U196lS3+HjKLtSJ5X6rRve0vDj6wXsETDzSWjt9sum9namLDmwcwMRI2dwmSGm+wGkqRpc90gcmF8ekXdZ7DeEFxqU/dxH0PV3SLnm700DcvB5dI6LUqAGKS3vTEfCISX62WJC4BkbO1OKf0pJCyHhDlKxvfyQ7isDLx6NxjvmukigE8PgW+Gabix0WFAgHoX5l7N6laQ42KpAZTgwbl+vLW39NjfqmKeWI+ae7kmGzt/YtH0s6qLkjNhHsMfIoxEuALRZzWWDvLAkGgJeXBmEE+bBkgKgzn+IkpRnyZTQyARoF/cDIVhk90YespGwnepZHGWiZ08qxWQSAA=
notifications:
  slack:
    secure: Xy8bmNmQr7jTHJUk/PAHgPA0OG4Lj9ahilStHhwYdq5zNx3gWMgupo6sb5FXq1WEB/fMS2uU5020N4cWEQ8lJ1UbZsPv4GpeGP5IV6MLAAHL+umqNPOwwt9yWPyitzV2hIn9pJCFX+sRm64UkkC0iNYyncXietSVUOzMcz65MH3Uy9JISELbbNzR0Ii4k7qX77qXGJJZ1CjHfbJhG7D2SBs+C224sM6EZlwsXKzhdX3c45YNylkj/h6vqcqrZd8R4a/ukLoXVsVbFpr/8wjYU+qL9Y+SMXAJlEN3DJv/8ZtD3XhgNbVLmud6tem4rBM58zG7nTmb5rZbhrxo/86xHqDim8rhgUbiBzHtluJsUXI3PKUUFm1FzBDqt3S6kBsLhw86yraVc3uyTx1HfoKlNR4VplgeOCtwsH9aWy9ZmV13a88dTPgeOpMVgNxatUJFlXS6HpKXhAZ9+2CJYHSW22DnSebBxXq/LBWofjonTv6jjXZUba6pdMsyd7NHinzGLKgC5mK/hW8TzDncIz8hVj1Y7rki45jk+g2eIyOdJ6V3VHs1uguMM03qd5Qt8u/1yJbP/yyw1IgE1DVQvIGOwSyc7PA7yBOZUGankG8J7GjDVwny53qZJDjHL7+1bNxwHloPE73TsYlo8IdqN47mcMOF6Ko9xdastMk39kJw6go=
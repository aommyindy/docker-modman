sudo: required
services:
- docker
install:
- docker build -t $DOCKER_IMAGE .
after_success:
- docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"
- if [[ "$TRAVIS_TAG" =~ $TAG_PATTERN ]]; then docker push $DOCKER_IMAGE; fi
env:
  global:
  - TAG_PATTERN="^[0-9]+(\.[0-9]+){2}(-(alpha|beta|rc))?$"
  - DOCKER_IMAGE=ffuenf/modman:${TRAVIS_TAG:=$TRAVIS_BUILD_NUMBER}
  - secure: cFQccX/kNoP5tJCh+btj6YWgNLbTM/qrYp9SFaJWuMQSduUjTwQwjA2ZX6cx3F4U6znMP4fzD+BPm/fvKu5+zsAZL+qQE4ZmMezkAVoWWulQeXJEhHp1nBCaiP6ZA0sVxDfrR/TvjsCv16uzfwJejsUjwd1vOhoRGChv9IQRYBZvo6YGvbTCUKwEULzBgpF2v5B7fruSZ1vHtZJu59VXXj6YxKqK07rpRlhe4xMfmyJIXBjZ6ZQX/KwuYkoVN0SceGsjy3K19SCmbfSGMflH8N9oc/b4N7UtACY2u2lgJa2tZ0axM6B+YjUuNJCnMnuKbSvjShOMOlJ42nf/dYyF/1cyPoNpln/bN9VJw/oFvgABeb8o3hmdWUSIRRlXtWw8vPBGpcmrLxmGj927LkR42WMosg1wPEUWWX7mHQH23fjnRZUnfbcjd5DlBL7Vqw8dfOJ9Poz/MW993fiKnyGsyc88vN6Hcerpe2cFpxyrgfixsJz4jpWLpv4HqOEzufpbFir4oeDsWc+hKOJtIqqKYWsT7NzevfzIR0AFVKTfkF4rqUtU+mUdKmxT1DyRwKygVWXeCQU/gkCl17VUxFYW1sgyalk7Xq2DcEoHX2Cuu9+7nReq2wKS7mlJF7LCOEhRAEOLlq1fieUPMeRFzIoDfr5+UOvRsDKR10jsCLLytBk=
  - secure: XAhF4X22bVeRi1mQtHqcKTkI48O5tNtaZcPdu+95E91hKNU8HqdQ968FglWxfs79F2EuanIg4DXNMqY+G+igyeMHak5X1r3yOqXF/jlqoKoqIUsS6vn4sm8k8ff8q9Idz1LdVI/D6M3SUZBsTMUQ+89FKNg77OQ/2ykuxrLBRK5P7pUmuGupsSrjgGDvV9jGRtPZgx4n485TdhthX+Zi0KpoHVYIA+fF4cwp/unYqeU28yqiKZBl0s53RtBAt0SbwAR7lfuFKmF7ZIfhslzhxNtp41amI0a9UEpfAZoI2Ht+stukmo9867YJaKz7W0Y+B6IqoiECDiMe6dBurOgqEocxyRDgZiuaIp67kPUvXMyk8j4Pl6Fz+y+rZwqyfUSBitqm01rUEjzUKep1gq2w68tb7b4zXkq4CsnIA8Zbg2+xBTl3Nit/K2FcjatYfDZc/yRVxBO9tbaNvF+fiUWbNZ3sqknog69kHG9XHUSeNuI0VlfZCOqijNKRc0uRFiUxYO1csrXBYyor/TYAnHFQPh1o7TEbGUkoFTSJsalrmbCVyfKnVIlmNtZ14Jk1BTXUrguU4We00E9GLa4aVQolK7OL7/UiKmfGdvcQdiSwnpCzDWxKyMzhJlkLwewnw4aWd93ThBqimYQ+C56Wh0P8Fk64rHFYQbw7EysL91o0FiE=
  - secure: oioqq24va5IGAbAHzQ5bL9Ql8kTOxshImXGFA+bcJmra+N9k8m70e0wOiNMxgo+cvV3P9/SBRH8bg7Y5rnZ8YF1kMfIloz07QkIUHu8C6EELyHyyQGtNaOf+duwauNE3EwBbMra1QoiLETL6YUZ4R3ArXsG1Gwa5nsFZJ9qHx8CP+CLu0eWhzRmEV8ThSoyxjjQYEzpE7XgH3HW8TcOa1DXSvgg/VC61YfQQim5C5wLTbZ7SlRqDbIfyDEs3eReg+YXgqb1pg1hRvw1+x7AA6Q7DSrD6Xl7LHAoQnBHPkl/AHfiE1sK/k+6uBxeEfvUza0/ECVkwe6TN0SFLU49EF/vljBeYmFVN4ev4xOYV1K3/5tw8Ama1Y8rkTFwAZtyFw+mQUMl2w2/Oz04fa0DVjYr3PdLpHXSfRk0wWLimtcuYXoluVLirgYMUHQewzcOGqTsFAwxcSWZuqUtQDC80nU0kSAwhmamoy1+yhgdFwd4khxv8PYMuXwJmZCYjoxU7dWDa8CgLqiJJxZEJmZr9oCDTay6cQdl63JU/dYc6hyGQ9jhPdZ4Kv6moDn8nwKpWrksizArdYcJdOME4uwc58qHTV84RKR8EyZX7zwqVCND/WV+fzohsbaUF1bEflfeSsCusd+EKZVUwu7PO9srruTfg0pTySHXxoSM4WmG8tVU=
notifications:
  slack:
    secure: DXQ3HZenRklXGszlq7nB5wfmH2lXT3AouVyznEWG9b4ChrgKBwb1WDaZ/9clY3BbN7GBoJ0i6bx4riMCs3jNBJJqeqvPXoHhVEVzY12UGkNMs6moJ9xw61jNbmg3knaVOITKN7xhun9O1Dh9ebS4J+httGt9lewGDztgdSSs3r0MDWkl5CBBniOHqRMhbPzzjGN6526k7b9NLW9BvU2+oeE3ktQ5RanBP3XKg97kdMU1UDPqU5g0oiyNYV6oTWMO0DLNbIPsqSdSczNxCqHP7/B+IYp9tScWLctUQtDPZOtJCM/Vi7lJ/acJ/EqP8pp07OHnoIKIE3RCLzLYIsOLRTZjVgvebH4IGet6Df/xUc6ZTgCWCuQrOSF2h+jKl3lH7ShTN2o2sfIjFzIm5S1NDGFn+AZPVH6E0aFhMw9yGFqaRdV6209xV92/mNFI2OJi3QwYDRxzJBpBbbfCsmmrluRLRUXpLyzRzhNKFD64MIjpcnE3+S38SsRjiItdIdElgpqgzQDc8u7beqfdFRixnUvAsOf64zaRrQ2CjlwC1mdF8JRMAwIrovOjUK7TBfMg/ptu3+7na1v4xEQCnJq05TlsTDs9EDa9wI3R6rZZhW7/A2Y7F0XXPeMmACViKJaslQRXXD8ssyljnWEnX1Eq3+Trd4YmgkLG+NMtMqqT2NM=
